(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(t,e,n){t.exports=n(236)},236:function(t,e,n){"use strict";n.r(e);var r=n(5),a=n(6),i=n(7),o=n(8),s=n(30),c=n.n(s),l=n(40),p=n(0),u=n.n(p),h=n(29),b=n.n(h),d=n(17),f=n(33),m=n(20),v=n(12),y=(n(90),n(3)),g=n(44),O=n(87),j=n(15),E=n(28),w=n.n(E);function I(){var t=Object(j.a)(["\n    mutation SendHookData($req: StreamRequest!) {\n      sendStreamRequest(request: $req)\n    }\n  "]);return I=function(){return t},t}function D(){var t=Object(j.a)(["\n    query AllStreams {\n      streams {\n        id\n      }\n    }\n  "]);return D=function(){return t},t}function S(){var t=Object(j.a)(["\n    query GetStream($streamID: Int!) {\n      stream(streamID: $streamID) {\n        ...stream\n      }\n    }\n    ","\n  "]);return S=function(){return t},t}function x(){var t=Object(j.a)(["\n    query Version {\n      apiVersion\n    }\n  "]);return x=function(){return t},t}function C(){var t=Object(j.a)(["\n    subscription Entities {\n      entityEvent {\n        streamID\n        entityID\n        type {\n          __typename\n          ... on AddEntity {\n            entity {\n              ...entity\n            }\n          }\n          ... on RemoveEntity {\n            id\n          }\n          ... on SetEntities {\n            entities {\n              ...entity\n            }\n          }\n          ... on UpdateTarget {\n            targetID\n          }\n          ... on UpdateClass {\n            classJob {\n              ...classJob\n            }\n          }\n          ... on UpdateLastAction {\n            action {\n              ...action\n            }\n          }\n          ... on UpdateCastingInfo {\n            castingInfo {\n              ...castingInfo\n            }\n          }\n          ... on UpsertStatus {\n            index\n            status {\n              ...status\n            }\n          }\n          ... on RemoveStatus {\n            index\n          }\n          ... on UpdateLocation {\n            location {\n              ...location\n            }\n          }\n          ... on UpdateResources {\n            resources {\n              ...resources\n            }\n          }\n          ... on UpdateLockonMarker {\n            lockonMarker\n          }\n        }\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "]);return C=function(){return t},t}function k(){var t=Object(j.a)(["\n    subscription Streams {\n      streamEvent {\n        streamID\n        type {\n          __typename\n          ... on UpdateIDs {\n            serverID\n            instanceNum\n            characterID\n          }\n          ... on UpdateMap {\n            place {\n              ...place\n            }\n          }\n        }\n      }\n    }\n    ","\n  "]);return k=function(){return t},t}function T(){var t=Object(j.a)(["\n    fragment stream on Stream {\n      id\n      serverID\n      instanceNum\n      characterID\n\n      place {\n        ...place\n      }\n      enmity {\n        ...enmity\n      }\n\n      entities {\n        ...entity\n      }\n    }\n    ","\n    ","\n    ","\n  "]);return T=function(){return t},t}function P(){var t=Object(j.a)(["\n    fragment entity on Entity {\n      id\n      index\n      name\n      targetID\n      ownerID\n      level\n      classJob {\n        ...classJob\n      }\n      isNPC\n      isEnemy\n      isPet\n      bNPCInfo {\n        nameID\n        baseID\n        modelID\n        name\n        size\n        error\n      }\n      resources {\n        ...resources\n      }\n      location {\n        ...location\n      }\n      lastAction {\n        ...action\n      }\n      statuses {\n        ...status\n      }\n      lockonMarker\n      castingInfo {\n        ...castingInfo\n      }\n      rawSpawnJSONData\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "]);return P=function(){return t},t}function N(){var t=Object(j.a)(["\n    fragment enmity on Enmity {\n      targetHateRanking {\n        actorID\n        hate\n      }\n      nearbyEnemyHate {\n        enemyID\n        hatePercent\n      }\n    }\n  "]);return N=function(){return t},t}function M(){var t=Object(j.a)(["\n    fragment place on Place {\n      mapID\n      territoryID\n      maps {\n        key\n        id\n        SizeFactor\n        OffsetX\n        OffsetY\n        PlaceName\n        PlaceNameSub\n        TerritoryType\n      }\n    }\n  "]);return M=function(){return t},t}function L(){var t=Object(j.a)(["\n    fragment castingInfo on CastingInfo {\n      actionID\n      actionName\n      startTime\n      castTime\n      targetID\n      location {\n        ...location\n      }\n\n      castType\n      effectRange\n      xAxisModifier\n      omen\n    }\n  "]);return L=function(){return t},t}function F(){var t=Object(j.a)(["\n    fragment status on Status {\n      id\n      param\n      name\n      description\n      startedTime\n      duration\n      actorID\n      lastTick\n    }\n  "]);return F=function(){return t},t}function A(){var t=Object(j.a)(["\n    fragment action on Action {\n      id\n      name\n      targetID\n      useTime\n    }\n  "]);return A=function(){return t},t}function R(){var t=Object(j.a)(["\n    fragment location on Location {\n      x\n      y\n      z\n      orientation\n      lastUpdated\n    }\n  "]);return R=function(){return t},t}function z(){var t=Object(j.a)(["\n    fragment resources on Resources {\n      hp\n      mp\n      tp\n      maxHP\n      maxMP\n      lastTick\n    }\n  "]);return z=function(){return t},t}function U(){var t=Object(j.a)(["\n    fragment classJob on ClassJob {\n      id\n      name\n      abbreviation\n    }\n  "]);return U=function(){return t},t}var H,_,q,G,J,B,W,V,Y,X,Q,K=new function t(){Object(r.a)(this,t),this.classJobFragment=w()(U()),this.resourcesFragment=w()(z()),this.locationFragment=w()(R()),this.actionFragment=w()(A()),this.statusFragment=w()(F()),this.castingInfoFragment=w()(L()),this.placeFragment=w()(M()),this.enmityFragment=w()(N()),this.entityFragment=w()(P(),this.classJobFragment,this.resourcesFragment,this.locationFragment,this.actionFragment,this.statusFragment,this.castingInfoFragment),this.streamFragment=w()(T(),this.placeFragment,this.enmityFragment,this.entityFragment),this.streamSubscription=w()(k(),this.placeFragment),this.entitySubscription=w()(C(),this.entityFragment,this.actionFragment,this.castingInfoFragment,this.statusFragment,this.locationFragment,this.resourcesFragment,this.classJobFragment),this.versionQuery=w()(x()),this.streamQuery=w()(S(),this.streamFragment),this.listStreamsQuery=w()(D()),this.hookMutation=w()(I())},$=n(26),Z=n(137),tt=n(124),et=n(121),nt=Object(et.a)(function(t){var e=t.graphQLErrors,n=t.networkError;e&&e.map(function(t){var e=t.message,n=t.locations,r=t.path;return console.log("[GraphQL error]: Message: ".concat(e,", Location: ").concat(n,", Path: ").concat(r))}),n&&console.log("[Network error]: ".concat(n))}),rt=function(t,e){return new Promise(function(n,r){Object($.d)(Object($.b)(t,e)).then(function(t){t.data?n(t.data):r(t.errors)}).catch(function(t){return r(t)})})},at=function t(e,n){var a=this;Object(r.a)(this,t),this.httpLink=void 0,this.wsLink=void 0,this.getAPIVersion=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(a.httpLink,{query:K.versionQuery});case 2:return e=t.sent,t.abrupt("return",e.apiVersion);case 4:case"end":return t.stop()}},t)})),this.listStreams=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(a.httpLink,{query:K.listStreamsQuery});case 2:return e=t.sent,t.abrupt("return",e.streams);case 4:case"end":return t.stop()}},t)})),this.getStream=function(){var t=Object(l.a)(c.a.mark(function t(e){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={streamID:e},t.next=3,rt(a.httpLink,{query:K.streamQuery,variables:n});case 3:return r=t.sent,t.abrupt("return",r.stream);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.subscribeToStreamEvents=function(t,e){return Object($.b)(a.wsLink,{query:K.streamSubscription}).subscribe({next:function(n){if(n.data){var r=n.data.streamEvent;if(r.streamID===t){var a=r.type,i=a.__typename,o=Object(O.a)(a,["__typename"]);e(i,o)}}}})},this.subscribeToEntityEvents=function(t,e){return Object($.b)(a.wsLink,{query:K.entitySubscription}).subscribe({next:function(n){if(n.data){var r=n.data.entityEvent;if(r.streamID===t){var a=r.entityID,i=r.type,o=i.__typename,s=Object(O.a)(i,["__typename"]);e(a,o,s)}}}})};var i=n?{headers:{Authorization:n}}:{},o=n?function(){return{authorization:n}}:void 0;this.httpLink=$.a.from([nt,new Z.a(Object(g.a)({uri:e},i))]),this.wsLink=$.a.from([nt,new tt.a({uri:e.replace("http://","ws://"),options:{reconnect:!0,connectionParams:o}})])};function it(t){return"0x".concat(("00000000"+t.toString(16)).slice(-8))}var ot,st,ct,lt,pt,ut,ht,bt,dt,ft,mt,vt,yt=function(){function t(e,n,a){Object(r.a)(this,t),this.p0=void 0,this.t0=void 0,this.p1=void 0,this.t1=void 0,this.duration=void 0,this.p0=e,this.p1=n,this.t0=a,this.duration=n.lastUpdated-e.lastUpdated,this.t1=this.t0+this.duration}return Object(a.a)(t,[{key:"pt",value:function(t){if(t<=this.t0)return this.p0;if(t>=this.t1)return this.p1;var e=(t-this.t0)/this.duration;return{x:this.p0.x+(this.p1.x-this.p0.x)*e,y:this.p0.y+(this.p1.y-this.p0.y)*e,z:this.p0.z+(this.p1.z-this.p0.z)*e,orientation:0,lastUpdated:0}}}]),t}(),gt=(H=function(){function t(e,n,a){var i=this;Object(r.a)(this,t),this.id=0,this.index=-1,this.name="",this.bNPCInfo=void 0,this.ownerID=0,this.isNPC=!1,this.isEnemy=!1,this.isPet=!1,this.rawSpawnData={},Object(m.a)(this,"targetID",_,this),Object(m.a)(this,"target",q,this),Object(m.a)(this,"level",G,this),Object(m.a)(this,"classJob",J,this),Object(m.a)(this,"resources",B,this),Object(m.a)(this,"location",W,this),Object(m.a)(this,"lastAction",V,this),Object(m.a)(this,"castingInfo",Y,this),Object(m.a)(this,"isHidden",X,this),this.statuses=y.m.map(),this.interpBufffer=[],Object(m.a)(this,"interpLocation",Q,this),this.options=void 0;var o=e.id,s=e.index,c=e.name,l=e.bNPCInfo,p=e.ownerID,u=e.isNPC,h=e.isEnemy,b=e.isPet,d=e.targetID,f=e.level,v=e.lastAction,g=e.castingInfo;Object.assign(this,{id:o,index:s,name:c,bNPCInfo:l,ownerID:p,isNPC:u,isEnemy:h,isPet:b,targetID:d,level:f,lastAction:v,castingInfo:g}),this.classJob=e.classJob,this.resources=e.resources,this.location=e.location,this.target=n,this.interpLocation=e.location,this.rawSpawnData=JSON.parse(e.rawSpawnJSONData),e.statuses.forEach(function(t,e){t&&i.statuses.set(e,t)}),this.options=a}return Object(a.a)(t,[{key:"handleEntityEvent",value:function(t,e){switch(t){case"UpdateTarget":this.targetID=e.targetID,this.target=e.target;break;case"UpdateClass":this.classJob=e.classJob;break;case"UpdateLastAction":this.lastAction=e.action;break;case"UpdateCastingInfo":this.castingInfo=e.castingInfo;break;case"UpsertStatus":this.statuses.set(e.index,e.status);break;case"RemoveStatus":this.statuses.delete(e.index);break;case"UpdateLocation":var n=this.location;this.location=e.location,this.options.locationInterpolation&&(0===this.interpBufffer.length&&(n.lastUpdated=e.location.lastUpdated-350),this.interpBufffer.push(new yt(n,e.location,performance.now())));break;case"UpdateResources":this.resources=e.resources}}},{key:"animationFrame",value:function(t){if(this.options.locationInterpolation){for(var e;this.interpBufffer.length>0;){if(t<this.interpBufffer[0].t0)return;if(!(t>this.interpBufffer[0].t1)){e=this.interpBufffer[0];break}this.interpBufffer.shift()}if(e)this.interpLocation=e.pt(t);else{var n=this.interpLocation,r=n.x,a=n.y,i=n.z,o=this.location,s=r-o.x,c=a-o.y,l=i-o.z;Math.sqrt(s*s+c*c+l*l)>.1&&(this.interpLocation=this.location)}}}},{key:"realName",get:function(){return this.isNPC&&this.bNPCInfo&&this.bNPCInfo.name||this.name}},{key:"hexID",get:function(){return it(this.id)}},{key:"hasTarget",get:function(){return 3758096384!==this.targetID&&0!==this.targetID}},{key:"targetString",get:function(){if(!this.hasTarget)return"";var t=this.target&&this.target.realName||"Unknown";return"".concat(t," (").concat(this.hexTargetID,")")}},{key:"hexTargetID",get:function(){return it(this.targetID)}},{key:"castingSummary",get:function(){if(!this.castingInfo)return null;var t=this.castingInfo,e=t.actionName,n=t.actionID;return"".concat(e," (").concat(n,")")}},{key:"castingDetails",get:function(){if(!this.castingInfo)return null;var t=Object.assign({},this.castingInfo),e=t.target&&t.target.realName||"Unknown";return t.targetString="".concat(e," (").concat(it(t.targetID),")"),delete t.targetID,delete t.target,t}},{key:"statusList",get:function(){return Object.fromEntries(this.statuses.toJS())}},{key:"radius",get:function(){return this.bNPCInfo&&this.bNPCInfo.size>0?this.bNPCInfo.size:.5}}]),t}(),_=Object(v.a)(H.prototype,"targetID",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=Object(v.a)(H.prototype,"target",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(v.a)(H.prototype,"level",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),J=Object(v.a)(H.prototype,"classJob",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=Object(v.a)(H.prototype,"resources",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=Object(v.a)(H.prototype,"location",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(v.a)(H.prototype,"lastAction",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(v.a)(H.prototype,"castingInfo",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(v.a)(H.prototype,"isHidden",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=Object(v.a)(H.prototype,"interpLocation",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(v.a)(H.prototype,"handleEntityEvent",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"handleEntityEvent"),H.prototype),Object(v.a)(H.prototype,"animationFrame",[y.f],Object.getOwnPropertyDescriptor(H.prototype,"animationFrame"),H.prototype),Object(v.a)(H.prototype,"realName",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"realName"),H.prototype),Object(v.a)(H.prototype,"hexID",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"hexID"),H.prototype),Object(v.a)(H.prototype,"hasTarget",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"hasTarget"),H.prototype),Object(v.a)(H.prototype,"targetString",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"targetString"),H.prototype),Object(v.a)(H.prototype,"hexTargetID",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"hexTargetID"),H.prototype),Object(v.a)(H.prototype,"castingSummary",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"castingSummary"),H.prototype),Object(v.a)(H.prototype,"castingDetails",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"castingDetails"),H.prototype),Object(v.a)(H.prototype,"statusList",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"statusList"),H.prototype),Object(v.a)(H.prototype,"radius",[y.g],Object.getOwnPropertyDescriptor(H.prototype,"radius"),H.prototype),H),Ot=n(126),jt=n.n(Ot),Et={streamStore:null},wt=new(ot=function(){function t(){Object(r.a)(this,t),Object(m.a)(this,"loading",st,this),Object(m.a)(this,"error",ct,this),this.gqlClient=void 0,this.streamID=0,this.apiURL="",Object(m.a)(this,"serverID",lt,this),Object(m.a)(this,"instanceNum",pt,this),Object(m.a)(this,"characterID",ut,this),Object(m.a)(this,"place",ht,this),Object(m.a)(this,"entities",bt,this),Object(m.a)(this,"selectedEntityID",dt,this),Object(m.a)(this,"selectedMapIndex",ft,this),Object(m.a)(this,"options",mt,this),Object(m.a)(this,"animationFrame",vt,this)}return Object(a.a)(t,[{key:"initialize",value:function(){var t=Object(l.a)(c.a.mark(function t(e){var n,r,a,i,o,s,l,p,u,h,b,d=this;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.gqlClient=new at(e.apiURL,e.apiToken),t.next=3,this.gqlClient.getAPIVersion();case 3:if(n=t.sent,jt.a.satisfies(n,">=0.2.0-beta",{includePrerelease:!0})){t.next=7;break}return this.error="Your version of Aetherometer is no longer supported by this plugin. Please update to a newer version.",t.abrupt("return");case 7:return t.next=9,this.getActiveStreamID(e);case 9:if(r=this.streamID=t.sent,this.apiURL=e.apiURL,this.subscribeToStreamEvents(),this.subscribeToEntityEvents(),r){t.next=16;break}return this.error="Stream ID not found!",t.abrupt("return");case 16:return t.next=18,this.gqlClient.getStream(r);case 18:a=t.sent,i=a.serverID,o=a.instanceNum,s=a.characterID,l=a.place,p=a.entities,this.serverID=i,this.instanceNum=o,this.characterID=s,this.place=l,u=Object(f.a)(p);try{for(u.s();!(h=u.n()).done;)b=h.value,this.entities.set(b.id,new gt(b,void 0,this.options))}catch(c){u.e(c)}finally{u.f()}window.requestAnimationFrame(this.animationFrame),this.entities.forEach(function(t){var e=d.entities.get(t.targetID);if(t.target=e,t.castingInfo){var n=d.entities.get(t.castingInfo.targetID);t.castingInfo.target=n}}),this.loading=!1;case 29:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getActiveStreamID",value:function(){var t=Object(l.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.streamID){t.next=4;break}return t.abrupt("return",e.streamID);case 4:return t.next=6,this.gqlClient.listStreams();case 6:if(!((n=t.sent).length>0)){t.next=9;break}return t.abrupt("return",n[0].id);case 9:return t.abrupt("return",0);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"subscribeToStreamEvents",value:function(){var t=this;return this.gqlClient.subscribeToStreamEvents(this.streamID,Object(y.f)(function(e,n){if(!t.loading)switch(e){case"UpdateIDs":t.serverID=n.serverID,t.instanceNum=n.instanceNum,t.characterID=n.characterID;break;case"UpdateMap":t.place=n.place,t.selectedMapIndex=0}}))}},{key:"subscribeToEntityEvents",value:function(){var t=this;return this.gqlClient.subscribeToEntityEvents(this.streamID,Object(y.f)(function(e,n,r){if(!t.loading)if("AddEntity"!==n)if("RemoveEntity"!==n)if("SetEntities"!==n){var a=t.entities.get(e);if("UpdateTarget"===n){var i=t.entities.get(r.targetID);i&&(r.target=i)}if("UpdateCastingInfo"===n&&r.castingInfo){var o=t.entities.get(r.castingInfo.targetID);o&&(r.castingInfo.target=o)}a&&a.handleEntityEvent(n,r)}else t.setEntities(r.entities);else t.removeEntity(r.id);else t.addEntity(r.entity)}))}},{key:"addEntity",value:function(t){var e=this.entities.get(t.targetID),n=new gt(t,e,this.options);this.entities.set(t.id,n)}},{key:"removeEntity",value:function(t){this.entities.delete(t)}},{key:"setEntities",value:function(t){var e=this;this.entities.clear(),t.forEach(function(t){e.addEntity(t)})}},{key:"setSelectedEntityID",value:function(t){this.selectedEntityID=t}},{key:"setSelectedMapIndex",value:function(t){this.selectedMapIndex=t}},{key:"setOption",value:function(t,e){this.options[t]=e}},{key:"hexCharacterID",get:function(){return this.currentCharacter?this.currentCharacter.hexID:"0x00000000"}},{key:"currentCharacter",get:function(){return this.entities.get(this.characterID)}},{key:"selectedEntity",get:function(){return this.entities.has(this.selectedEntityID)?this.entities.get(this.selectedEntityID):this.currentCharacter}},{key:"entityList",get:function(){var t=[];return this.entities.forEach(function(e){return t.push(e)}),t.sort(function(t,e){return t.index-e.index}),t}},{key:"currentMap",get:function(){return this.place&&this.place.maps.length>0?this.place.maps[this.selectedMapIndex]:{key:1,id:"default/00",SizeFactor:100,OffsetX:0,OffsetY:0,PlaceName:"Eorzea",PlaceNameSub:"",TerritoryType:""}}}]),t}(),st=Object(v.a)(ot.prototype,"loading",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ct=Object(v.a)(ot.prototype,"error",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=Object(v.a)(ot.prototype,"serverID",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pt=Object(v.a)(ot.prototype,"instanceNum",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ut=Object(v.a)(ot.prototype,"characterID",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ht=Object(v.a)(ot.prototype,"place",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mapID:0,territoryID:0,maps:[]}}}),bt=Object(v.a)(ot.prototype,"entities",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),dt=Object(v.a)(ot.prototype,"selectedEntityID",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ft=Object(v.a)(ot.prototype,"selectedMapIndex",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),mt=Object(v.a)(ot.prototype,"options",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{followSelection:!0,locationInterpolation:!0}}}),Object(v.a)(ot.prototype,"initialize",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"initialize"),ot.prototype),Object(v.a)(ot.prototype,"subscribeToStreamEvents",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"subscribeToStreamEvents"),ot.prototype),Object(v.a)(ot.prototype,"subscribeToEntityEvents",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"subscribeToEntityEvents"),ot.prototype),Object(v.a)(ot.prototype,"addEntity",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"addEntity"),ot.prototype),Object(v.a)(ot.prototype,"removeEntity",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"removeEntity"),ot.prototype),Object(v.a)(ot.prototype,"setEntities",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"setEntities"),ot.prototype),vt=Object(v.a)(ot.prototype,"animationFrame",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){t.options.locationInterpolation&&t.entities.forEach(function(t){return t.animationFrame(e)}),window.requestAnimationFrame(t.animationFrame)}}}),Object(v.a)(ot.prototype,"setSelectedEntityID",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"setSelectedEntityID"),ot.prototype),Object(v.a)(ot.prototype,"setSelectedMapIndex",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"setSelectedMapIndex"),ot.prototype),Object(v.a)(ot.prototype,"setOption",[y.f],Object.getOwnPropertyDescriptor(ot.prototype,"setOption"),ot.prototype),Object(v.a)(ot.prototype,"hexCharacterID",[y.g],Object.getOwnPropertyDescriptor(ot.prototype,"hexCharacterID"),ot.prototype),Object(v.a)(ot.prototype,"currentCharacter",[y.g],Object.getOwnPropertyDescriptor(ot.prototype,"currentCharacter"),ot.prototype),Object(v.a)(ot.prototype,"selectedEntity",[y.g],Object.getOwnPropertyDescriptor(ot.prototype,"selectedEntity"),ot.prototype),Object(v.a)(ot.prototype,"entityList",[y.g],Object.getOwnPropertyDescriptor(ot.prototype,"entityList"),ot.prototype),Object(v.a)(ot.prototype,"currentMap",[y.g],Object.getOwnPropertyDescriptor(ot.prototype,"currentMap"),ot.prototype),ot),It=n(4),Dt=n(18),St=(n(92),n(10)),xt=n(128),Ct=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(t,a){var i;Object(r.a)(this,n);var o=t.key,s=t.SizeFactor,c=t.OffsetX,l=t.OffsetY,p="".concat(a.replace("query","map"),"/").concat(o),u=s/100,h=St.Texture.from(p),b=2048/u;return(i=e.call(this,h)).anchor.x=.5,i.anchor.y=.5,i.height=b,i.width=b,i.position.x=-c,i.position.y=-l,i}return Object(a.a)(n,[{key:"dispose",value:function(){this.destroy({children:!0})}}]),n}(St.Sprite);var kt=function(){var t=document.createElement("canvas");t.width=512,t.height=512;var e=t.getContext("2d");e.beginPath(),e.moveTo(0,256),e.arc(0,256,256,-Math.PI/6,Math.PI/6),e.lineTo(0,256);var n=e.createLinearGradient(0,0,230,0);return n.addColorStop(0,"rgba(255, 255, 255, 0.6)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.4)"),n.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=n,e.fill(),t}(),Tt=function(){var t=document.createElement("canvas");t.width=512,t.height=512;var e=t.getContext("2d");return e.arc(256,256,200,0,2*Math.PI),e.lineWidth=50,e.strokeStyle="#FF0000",e.stroke(),t}(),Pt=function(){var t=document.createElement("canvas");t.width=1024,t.height=1024;var e=t.getContext("2d");return e.fillStyle="#FFFFFF",e.strokeStyle="#FFFFFF",e.lineCap="round",e.globalAlpha=.5,e.beginPath(),e.arc(512,512,512,0,2*Math.PI),e.fill(),e.globalAlpha=1,e.lineWidth=32,e.beginPath(),e.arc(512,512,512-e.lineWidth/2,.25*Math.PI,.75*Math.PI),e.stroke(),e.beginPath(),e.arc(512,512,512-e.lineWidth/2,1.25*Math.PI,1.75*Math.PI),e.stroke(),e.lineWidth=64,e.beginPath(),e.arc(512,512,512-e.lineWidth/2,1.75*Math.PI,.25*Math.PI),e.stroke(),e.lineWidth=128,e.beginPath(),e.arc(512,512,512-e.lineWidth/2,1.9*Math.PI,.1*Math.PI),e.stroke(),t}(),Nt=function(){var t=new St.Sprite(new St.Texture(new St.BaseTexture(kt)));return t.height=51200,t.width=51200,t.anchor.x=0,t.anchor.y=.5,t},Mt=function(){var t=new St.Sprite(new St.Texture(new St.BaseTexture(Tt)));return t.height=1740.8,t.width=1740.8,t.anchor.x=.5,t.anchor.y=.5,t},Lt=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(t,a,i){var o;Object(r.a)(this,n),(o=e.call(this,new St.Texture(new St.BaseTexture(Pt)))).targetObserverDispose=void 0,o.locationObserverDispose=void 0,o.interpLocationObserverDispose=void 0,o.castingObserverDispose=void 0,o.hiddenObserverDispose=void 0,o.baseEntity=void 0,o.options=void 0,o.selector=void 0,o.locationUpdated=function(){var t=o.baseEntity.location,e=t.x,n=t.z,r=t.orientation;o.options.locationInterpolation||(o.position.x=e,o.position.y=n),o.rotation=-Math.PI/2-r},o.interpLocationUpdated=function(){if(o.options.locationInterpolation){var t=o.baseEntity.interpLocation,e=t.x,n=t.z;o.position.x=e,o.position.y=n}},o.targetUpdated=function(){var t,e=(t=o.baseEntity).isEnemy&&t.hasTarget?It.Colors.RED3:t.isEnemy?It.Colors.VIOLET3:t.isNPC?It.Colors.FOREST3:It.Colors.COBALT3;o.tint=parseInt(e.substring(1),16)},o.hiddenUpdated=function(){o.visible=!o.baseEntity.isHidden},o.select=function(){o.selector=Mt(),o.addChild(o.selector)},o.unselect=function(){o.selector&&(o.removeChild(o.selector),o.selector=void 0)},o.baseEntity=t,o.options=i,0===t.index&&o.addChild(Nt());var s=o.baseEntity.radius;return o.anchor.x=.5,o.anchor.y=.5,o.height=2*s,o.width=2*s,o.interactive=!0,o.interactiveChildren=!1,o.cursor="pointer",o.targetUpdated(),o.locationUpdated(),o.interpLocationUpdated(),a(),o.targetObserverDispose=Object(y.n)(o.baseEntity,"target",o.targetUpdated),o.locationObserverDispose=Object(y.n)(o.baseEntity,"location",o.locationUpdated),o.interpLocationObserverDispose=Object(y.n)(o.baseEntity,"interpLocation",o.interpLocationUpdated),o.castingObserverDispose=Object(y.n)(o.baseEntity,"castingInfo",a),o.hiddenObserverDispose=Object(y.n)(o.baseEntity,"isHidden",o.hiddenUpdated),o}return Object(a.a)(n,[{key:"dispose",value:function(){this.destroy({children:!0}),this.targetObserverDispose&&this.targetObserverDispose(),this.locationObserverDispose&&this.locationObserverDispose(),this.interpLocationObserverDispose&&this.interpLocationObserverDispose(),this.castingObserverDispose&&this.castingObserverDispose()}}]),n}(St.Sprite),Ft=n(51),At=n(60),Rt=n(38);var zt,Ut,Ht,_t=function(t){switch(t.actionID){case 6635:case 6665:case 6885:return Object.assign(Object(g.a)({},t),{xAxisModifier:16,effectRange:100,castType:11});case 6637:return Object.assign(Object(g.a)({},t),{castType:10});case 13061:case 13062:case 13063:case 13103:case 13104:case 13105:case 13059:case 13060:case 13106:case 13107:return Object.assign(Object(g.a)({},t),{castType:4});case 13108:return Object.assign(Object(g.a)({},t),{castType:3});case 22097:case 22131:case 22181:return Object.assign(Object(g.a)({},t),{xAxisModifier:16,effectRange:50,castType:12})}return t},qt={12898:210,12899:210,12900:210,12901:210,12904:210,12905:210,13108:330,20037:150,20038:45,22663:210,22664:210,22665:210,22701:210,22702:210},Gt=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(t,a,i){var o;if(Object(r.a)(this,n),!t.castingInfo)return(o=e.call(this)).telegraphTexture=void 0,o.telegraphType=void 0,Object(Ft.a)(o);var s=_t(t.castingInfo),c=s.actionID,l=s.castType,p=s.effectRange,u=s.xAxisModifier,h=s.omen,b=s.target,d=s.location,f=0;b&&(f=b.radius);var m=new St.Graphics;m.beginFill(16777215,.2),m.lineStyle(16,16777215,1,0),p+=f;var v="";switch(l){case 4:case 8:case 12:v="rectangle",m.drawRect(0,0,1024,1024);break;case 3:case 13:var y=function(t){var e=/gl_fan(\d+)/.exec(t);return!e||e.length<2?0:Number(e[1])}(h);if(c in qt&&(y=qt[c]),0===y)break;var g=y/180*Math.PI;v="fan",m.moveTo(512,512),m.arc(512,512,512,-g/2,g/2),m.closePath();break;case 2:case 5:case 6:case 7:v="circle",m.drawCircle(512,512,512),m.closePath();break;case 10:v="halo",m.drawCircle(512,512,512),m.closePath(),m.beginHole(),m.drawCircle(512,512,128),m.closePath(),m.endHole();break;case 11:v="cross",m.drawRect(0,0,1024,1024)}if(""===v)return(o=e.call(this)).telegraphTexture=void 0,o.telegraphType=void 0,Object(Ft.a)(o);var O=new St.BaseRenderTexture({width:1024,height:1024,scaleMode:St.SCALE_MODES.LINEAR}),j=new St.RenderTexture(O);a.render(m,j,!1),(o=e.call(this,j)).telegraphTexture=void 0,o.telegraphType=void 0,o.telegraphTexture=j,o.telegraphType=v;var E=It.Colors.COBALT5;switch(t.isEnemy&&(E=It.Colors.VERMILION3),v){case"cross":case"rectangle":o.anchor.x=.5,o.anchor.y=0,o.width=u,o.height=p,o.rotation=-d.orientation+Math.PI;break;case"fan":case"halo":case"circle":o.anchor.x=.5,o.anchor.y=.5,o.width=2*p,o.height=2*p,o.rotation=-d.orientation-Math.PI/2}return i&&(o.rotation=o.rotation+i),o.position.x=d.x,o.position.y=d.z,o.tint=parseInt(E.substring(1),16),Object(Ft.a)(o)}return Object(a.a)(n,[{key:"createCompositeTelegraph",value:function(t,e){if(this.telegraphTexture){if("cross"===this.telegraphType){var r=new St.Container,a=new n(t,e,Math.PI/2),i=new n(t,e,-Math.PI/2),o=new n(t,e,Math.PI);return r.addChild(this),r.addChild(a),r.addChild(i),r.addChild(o),r}return this}}},{key:"destroy",value:function(){this.telegraphTexture&&this.telegraphTexture.destroy(!0),Object(At.a)(Object(Rt.a)(n.prototype),"destroy",this).call(this,{children:!0,texture:!0,baseTexture:!0})}}]),n}(St.Sprite),Jt=Object(d.b)("streamStore")(zt=Object(d.c)((Ht=Ut=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._canvas=void 0,t.app=void 0,t.viewport=void 0,t.entityContainer=new St.Container,t.telegraphsContainer=new St.Container,t.mapContainer=new St.Container,t.entitySprites={},t.telegraphSprites={},t.mapSprite=void 0,t.entityObserverDispose=void 0,t.mapObserverDispose=void 0,t.selectedEntityObserverDispose=void 0,t.optionsObserverDispose=void 0,t.coordText=new St.Text("",{fontFamily:"Arial",fontSize:24,fill:0,align:"center"}),t.hoverName=void 0,t.resize=function(){if(t.app&&t.viewport){var e=t.app.view.parentNode;t.app.renderer.resize(e.clientWidth,e.clientHeight-4),t.viewport.resize(t.app.screen.width,t.app.screen.height)}},t.setOverlay=function(e,n,r){var a="";e&&(a="".concat(e," ")),t.coordText.text="".concat(a,"(").concat(n,", ").concat(r,")")},t.handleEntityChange=function(e){"add"===e.type||"update"===e.type?t.addEntity(e.name,e.newValue):"delete"===e.type&&t.removeEntity(e.name)},t.addEntity=function(e,n){if(t.app){e in t.entitySprites&&t.removeEntity(e);var r=t.entitySprites[e]=new Lt(n,function(){return t.updateTelegraph(e,n)},t.props.streamStore.options);r.on("pointerover",function(e){t.hoverName=e.currentTarget.baseEntity.realName}),r.on("pointerout",function(e){t.hoverName===e.currentTarget.baseEntity.realName&&(t.hoverName="")}),r.on("click",function(e){t.props.streamStore.setSelectedEntityID(e.currentTarget.baseEntity.id)}),t.entityContainer.addChild(r)}},t.removeEntity=function(e){if(t.removeTelegraph(e),e in t.entitySprites){var n=t.entitySprites[e];t.entityContainer.removeChild(n),n.dispose(),delete t.entitySprites[e]}},t.removeTelegraph=function(e){if(e in t.telegraphSprites){var n=t.telegraphSprites[e];t.telegraphsContainer.removeChild(n),n.destroy(),delete t.telegraphSprites[e]}},t.updateTelegraph=function(e,n){if(t.app){t.removeTelegraph(e);var r=new Gt(n,t.app.renderer,0).createCompositeTelegraph(n,t.app.renderer);r&&(t.telegraphSprites[e]=r,t.telegraphsContainer.addChild(r))}},t.updateMap=function(e){if(t.viewport){t.mapSprite&&(t.mapContainer.removeChild(t.mapSprite),t.mapSprite.dispose()),t.mapSprite=void 0,t.mapSprite=new Ct(e,t.props.streamStore.apiURL),t.mapContainer.addChild(t.mapSprite);var n=t.mapSprite.height,r=t.mapSprite.width;t.viewport.worldHeight=n,t.viewport.worldWidth=r,t.viewport.clampZoom({maxWidth:r,maxHeight:n});var a=t.mapSprite.position.x,i=t.mapSprite.position.y;t.viewport.moveCenter(a,i);var o=a-r/2,s=a+r/2,c=i-n/2,l=i+n/2;t.viewport.clamp({left:o,top:c,right:s,bottom:l})}},t.updateEntitySelection=function(e,n){if(t.viewport){var r=e&&e.id||0,a=n&&n.id||0,i=t.entitySprites[r],o=t.entitySprites[a];t.viewport.plugins.remove("follow"),i&&i.unselect(),o&&(t.props.streamStore.options.followSelection&&t.viewport.follow(o),o.select())}},t.updateOptions=function(e,n){if(t.viewport&&"followSelection"===e)if(n){var r=t.entitySprites[t.props.streamStore.selectedEntity.id];r&&t.viewport.follow(r)}else t.viewport.plugins.remove("follow")},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.app=new St.Application({width:100,height:100,view:this._canvas,antialias:!0}),this.viewport=new xt.a({interaction:this.app.renderer.plugins.interaction}),this.viewport.drag().pinch().wheel().decelerate(),this.viewport.zoomPercent(8),this.app.stage.addChild(this.viewport),this.viewport.addChild(this.mapContainer),this.viewport.addChild(this.telegraphsContainer),this.viewport.addChild(this.entityContainer),window.addEventListener("resize",this.resize),this.resize(),this.updateMap(this.props.streamStore.currentMap),this.props.streamStore.entities.forEach(function(e,n){t.addEntity(n,e),t.updateTelegraph(n,e)}),this.entityObserverDispose=Object(y.n)(this.props.streamStore.entities,this.handleEntityChange),this.mapObserverDispose=Object(y.n)(this.props.streamStore,"currentMap",function(e){return t.updateMap(e.newValue)}),this.selectedEntityObserverDispose=Object(y.n)(this.props.streamStore,"selectedEntity",function(e){return t.updateEntitySelection(e.oldValue,e.newValue)}),this.updateEntitySelection(void 0,this.props.streamStore.selectedEntity),this.optionsObserverDispose=Object(y.n)(this.props.streamStore.options,function(e){"update"===e.type&&t.updateOptions(e.name,e.newValue)}),this.coordText.x=0,this.coordText.y=0;this.app.stage.interactive=!0,this.app.stage.on("pointermove",function(e){var n=e.data.getLocalPosition(t.mapContainer);t.setOverlay(t.hoverName||"",n.x,n.y)}),this.app.stage.addChild(this.coordText)}},{key:"componentWillUnmount",value:function(){this.entityObserverDispose&&this.entityObserverDispose(),this.mapObserverDispose&&this.mapObserverDispose(),this.selectedEntityObserverDispose&&this.selectedEntityObserverDispose(),this.optionsObserverDispose&&this.optionsObserverDispose(),this.app&&this.app.destroy()}},{key:"render",value:function(){var t=this;return u.a.createElement("canvas",{ref:function(e){e&&(t._canvas=e)}})}}]),n}(p.Component),Ut.defaultProps=Et,zt=Ht))||zt)||zt;function Bt(){var t=Object(j.a)(["\n  flex: 1 0 400px;\n  min-width: 0;\n  position: relative;\n"]);return Bt=function(){return t},t}var Wt=Dt.a.div(Bt()),Vt=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return p.createElement(Wt,null,p.createElement(Jt,null))}}]),n}(p.Component);function Yt(){var t=Object(j.a)(["\n  padding: 20px;\n  margin: 20px;\n  && {\n    background-color: ",";\n  }\n"]);return Yt=function(){return t},t}var Xt=Object(Dt.a)(It.Card)(Yt(),It.Colors.DARK_GRAY2),Qt=n(59),Kt=n(85),$t=n.n(Kt),Zt=n(136),te=n.n(Zt);function ee(){var t=Object(j.a)(["\n  display: grid;\n  grid-row-gap: 5px;\n  grid-column-gap: 10px;\n  grid-template-columns: max-content auto;\n  grid-auto-rows: minmax(18px, auto);\n"]);return ee=function(){return t},t}$t.a.extend(te.a);var ne,re,ae,ie,oe,se,ce,le,pe,ue=Dt.a.div(ee()),he=function(t){return u.a.createElement("div",{className:"".concat(It.Classes.TEXT_MUTED," ").concat(It.Classes.TEXT_SMALL)},t.children)},be=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=[];return Object.entries(this.props.infos).forEach(function(e){var r=Object(Qt.a)(e,2),a=r[0],i=r[1],o=typeof i;"number"===o||"string"===o||u.a.isValidElement(i)||(i=i?u.a.createElement(n,{infos:i}):u.a.createElement("div",null)),"lastUpdated"!==a&&"lastTick"!==a&&"startedTime"!==a&&"useTime"!==a||(i=$t()(i).format("L HH:mm:ss.SSS")),t.push(u.a.createElement(he,{key:"".concat(a,"-name")},a)),t.push(u.a.createElement("div",{key:"".concat(a,"-info")},i))}),u.a.createElement(ue,null,t)}}]),n}(p.Component);function de(){var t=Object(j.a)(["\n  height: 200px;\n"]);return de=function(){return t},t}var fe,me,ve,ye,ge=Dt.a.div(de()),Oe=Object(d.b)("streamStore")(ce=Object(d.c)((pe=le=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.streamStore,e=t.streamID,n=t.serverID,r=t.instanceNum,a=t.hexCharacterID,i=t.currentMap;if(!n)return u.a.createElement(Xt,{elevation:It.Elevation.THREE},u.a.createElement(ge,null,u.a.createElement(It.NonIdealState,{icon:"database",title:"Not yet initialized.",description:"The server has not yet been initialized. Please rezone to populate the data."})));var o={ServerID:n,InstanceNum:r,CharacterID:a,CurrentMap:i};return u.a.createElement(Xt,{elevation:It.Elevation.THREE},u.a.createElement(It.H5,null,"Stream ",e),u.a.createElement(be,{infos:o}),u.a.createElement(It.Tabs,{id:"ViewControls"},u.a.createElement(It.Tab,{id:"map",title:"Map",panel:u.a.createElement(je,null)}),u.a.createElement(It.Tab,{id:"options",title:"Options",panel:u.a.createElement(Ee,null)})))}}]),n}(p.Component),le.defaultProps=Et,ce=pe))||ce)||ce,je=Object(d.b)("streamStore")(ne=Object(d.c)((ae=re=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onChange=function(e){t.props.streamStore.setSelectedMapIndex(Number(e.currentTarget.value))},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.streamStore,e=t.place,n=t.selectedMapIndex;return u.a.createElement("div",null,u.a.createElement(It.HTMLSelect,{onChange:this.onChange,value:n},e.maps.map(function(t,e){return u.a.createElement("option",{key:e,value:e},t.PlaceName,t.PlaceNameSub&&" - ".concat(t.PlaceNameSub))})))}}]),n}(p.Component),re.defaultProps=Et,ne=ae))||ne)||ne,Ee=Object(d.b)("streamStore")(ie=Object(d.c)((se=oe=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this,e=this.props.streamStore.options;return u.a.createElement("div",null,u.a.createElement(It.Switch,{checked:e.followSelection,label:"Follow Selection",onChange:function(e){return t.props.streamStore.setOption("followSelection",e.currentTarget.checked)}}),u.a.createElement(It.Switch,{checked:e.locationInterpolation,label:"Interpolate Locations",onChange:function(e){return t.props.streamStore.setOption("locationInterpolation",e.currentTarget.checked)}}))}}]),n}(p.Component),oe.defaultProps=Et,ie=se))||ie)||ie,we=n(86),Ie="".concat(It.Classes.TEXT_SMALL," ").concat(It.Classes.TEXT_MUTED),De=Object(d.c)(fe=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onClick=function(){t.props.onSelect(t.props.entity.id)},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.entity,n=t.selected,r=u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("span",null,e.realName),e.hasTarget&&e.target&&u.a.createElement("span",{className:Ie}," ",">>"," ",e.target.realName," ")),u.a.createElement("div",null,e.hasTarget?u.a.createElement("span",{className:Ie},"(",e.hexID," ",">>"," ",e.hexTargetID,")"):u.a.createElement("span",{className:Ie},"(",e.hexID,")"),e.castingSummary&&u.a.createElement("span",{className:Ie}," | Casting: ",e.castingSummary),e.isHidden&&u.a.createElement("span",{className:Ie}," | HIDDEN")));return u.a.createElement(It.MenuItem,{text:r,active:n,onClick:this.onClick})}}]),n}(p.Component))||fe;function Se(){var t=Object(j.a)(["\n  list-style: none;\n  padding: 0;\n  max-height: 23vh;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: ",";\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n"]);return Se=function(){return t},t}var xe=Object(Dt.a)(It.UL)(Se(),It.Colors.GRAY1,It.Colors.DARK_GRAY5);var Ce=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(r.a)(this,n),(a=e.call(this,t)).handleFilter=function(t){a.setState({filter:t.target.value})},a.state={filter:""},a}return Object(a.a)(n,[{key:"render",value:function(){return u.a.createElement(Xt,{elevation:It.Elevation.THREE},u.a.createElement(It.H5,null,"Entities"),u.a.createElement(ke,{filter:this.state.filter}),u.a.createElement(It.InputGroup,{className:It.Classes.ROUND,leftIcon:"search",placeholder:"Search...",onChange:this.handleFilter}))}}]),n}(p.Component),ke=Object(d.b)("streamStore")(me=Object(d.c)((ye=ve=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onSelect=function(e){t.props.streamStore.setSelectedEntityID(e)},t}return Object(a.a)(n,[{key:"render",value:function(){var t,e=this,n=this.props.streamStore,r=n.entityList,a=n.selectedEntity,i=r.filter(function(t){return t.realName.includes(e.props.filter)}),o=(t=function(t){return t.isNPC},i.reduce(function(e,n){var r=Object(Qt.a)(e,2),a=r[0],i=r[1];return t(n)?[[].concat(Object(we.a)(a),[n]),i]:[a,[].concat(Object(we.a)(i),[n])]},[[],[]])),s=Object(Qt.a)(o,2),c=s[0],l=s[1];return u.a.createElement(xe,null,u.a.createElement(It.MenuDivider,{title:"Players"}),l.map(function(t){return u.a.createElement(De,{key:t.id,entity:t,selected:t===a,onSelect:e.onSelect})}),u.a.createElement(It.MenuDivider,{title:"NPCs"}),c.map(function(t){return u.a.createElement(De,{key:t.id,entity:t,selected:t===a,onSelect:e.onSelect})}))}}]),n}(p.Component),ve.defaultProps=Et,me=ye))||me)||me;function Te(){var t=Object(j.a)(["\n  margin: 5px 0px;\n  flex: 0 0 auto;\n  margin-left: 5px;\n  flex-basis: 120px;\n"]);return Te=function(){return t},t}function Pe(){var t=Object(j.a)(["\n  flex: 1 0 auto;\n  margin-right: 5px;\n"]);return Pe=function(){return t},t}function Ne(){var t=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Ne=function(){return t},t}var Me,Le,Fe,Ae,Re,ze,Ue=Dt.a.div(Ne()),He=Dt.a.div(Pe()),_e=Dt.a.div(Te()),qe=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.current,n=t.max,r=t.color,a=e/n*100;return isNaN(a)&&(a=100),u.a.createElement(Ue,null,u.a.createElement(He,{style:{color:r}},e,"/",n),u.a.createElement(_e,null,u.a.createElement("div",{className:"".concat(It.Classes.PROGRESS_BAR," ").concat(It.Classes.PROGRESS_NO_ANIMATION)},u.a.createElement("div",{className:It.Classes.PROGRESS_METER,style:{backgroundColor:r,width:"".concat(a,"%")}}))))}}]),n}(p.Component),Ge=Object(d.c)(Me=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t,e=this.props.entity,n=e.targetString,r=e.level,a=e.resources,i=e.location,o={Target:n,Level:r,HP:u.a.createElement(qe,{current:a.hp,max:a.maxHP,color:It.Colors.FOREST3}),MP:u.a.createElement(qe,{current:a.mp,max:a.maxMP,color:It.Colors.ROSE3}),TP:u.a.createElement(qe,{current:a.tp,max:1e3,color:It.Colors.GOLD3}),X:i.x,Y:i.y,Z:i.z,Rot:"".concat((t=i.orientation,t/Math.PI*180).toFixed(3),"\xb0 CCW from North")};return u.a.createElement(be,{infos:o})}}]),n}(p.Component))||Me,Je=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onChangeTab=function(e){t.handleTabClick(e.currentTarget.value,e)},t.renderTabTitle=function(t,e){if(!t.props)return t;var n=t.props,r=n.id,a=n.title;return p.createElement("option",{key:e,value:r},a)},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.state.selectedTabId,e=p.Children.map(this.props.children,this.renderTabTitle),n=this.getTabChildren().filter(function(e){return e.props.id===t}).map(this.renderTabPanel);return p.createElement("div",{className:It.Classes.TABS},p.createElement("span",{className:It.Classes.TEXT_LARGE,style:{marginRight:"5px"}},"Display:"),p.createElement("span",{role:"tablist"},p.createElement(It.HTMLSelect,{onChange:this.onChangeTab,value:t},e)),n)}}]),n}(It.Tabs),Be=Object(d.c)(Fe=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.entity,e=u.a.createElement(We,{infoGetter:function(){return t.lastAction}}),n=u.a.createElement(We,{infoGetter:function(){return t.castingDetails}}),r=u.a.createElement(We,{infoGetter:function(){return t.statusList}}),a=u.a.createElement(We,{infoGetter:function(){return t.bNPCInfo}}),i=u.a.createElement(We,{infoGetter:function(){return t.rawSpawnData}});return u.a.createElement(Je,null,u.a.createElement(It.Tab,{id:"la",title:"Last Action",panel:e}),u.a.createElement(It.Tab,{id:"castinf",title:"Casting Info",panel:n}),u.a.createElement(It.Tab,{id:"steff",title:"Status Effects",panel:r}),u.a.createElement(It.Tab,{id:"bnpc",title:"BNPC Info",panel:a}),u.a.createElement(It.Tab,{id:"spinf",title:"Spawn Info",panel:i}))}}]),n}(p.Component))||Fe,We=Object(d.c)(Le=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.infoGetter();return t?u.a.createElement(be,{infos:t}):u.a.createElement("div",null)}}]),n}(p.Component))||Le;function Ve(){var t=Object(j.a)(["\n  height: 400px;\n"]);return Ve=function(){return t},t}function Ye(){var t=Object(j.a)(["\n  margin: 10px 0;\n"]);return Ye=function(){return t},t}var Xe=Dt.a.div(Ye()),Qe=Dt.a.div(Ve()),Ke=Object(d.b)("streamStore")(Ae=Object(d.c)((ze=Re=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onHideEntity=function(e){t.props.streamStore.selectedEntity.isHidden=e.currentTarget.checked},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.streamStore.selectedEntity;return t?u.a.createElement(Xt,{elevation:It.Elevation.THREE},u.a.createElement(It.H5,null,t.realName," (",t.hexID,")"),u.a.createElement(Xe,null,u.a.createElement(Ge,{entity:t})),u.a.createElement(Xe,null,u.a.createElement(Be,{entity:t})),u.a.createElement(Xe,null,u.a.createElement(It.Checkbox,{checked:t.isHidden,label:"Hide?",onChange:this.onHideEntity})," ")):u.a.createElement(Xt,{elevation:It.Elevation.THREE},u.a.createElement(Qe,null,u.a.createElement(It.NonIdealState,{icon:"person",title:"No entity exists",description:"The server has not yet been populated with a list of entities. Please wait a moment."})))}}]),n}(p.Component),Re.defaultProps=Et,Ae=ze))||Ae)||Ae;function $e(){var t=Object(j.a)(["\n  padding: 10px;\n  text-align: center;\n"]);return $e=function(){return t},t}function Ze(){var t=Object(j.a)(["\n  flex: 0 0 400px;\n  min-width: 0;\n  height: 100vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: ",";\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n"]);return Ze=function(){return t},t}var tn=Dt.a.div(Ze(),It.Colors.GRAY1,It.Colors.DARK_GRAY5),en=Object(Dt.a)(It.H3)($e()),nn=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return p.createElement(tn,null,p.createElement(en,null,"Inspector"),p.createElement(Oe,null),p.createElement(Ce,null),p.createElement(Ke,null))}}]),n}(p.Component);function rn(){var t=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n\n  min-height: 100vh;\n  height: 100vh;\n  margin: auto;\n"]);return rn=function(){return t},t}function an(){var t=Object(j.a)(["\n  background-color: ",";\n"]);return an=function(){return t},t}var on=Dt.a.div(an(),It.Colors.DARK_GRAY3),sn=Dt.a.div(rn()),cn=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return p.createElement(on,{className:"bp3-dark"},p.createElement(sn,null,p.createElement(Vt,null),p.createElement(It.Divider,null),p.createElement(nn,null)))}}]),n}(p.Component);function ln(){var t=Object(j.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  height: 100vh;\n  margin: auto;\n"]);return ln=function(){return t},t}var pn,un,hn,bn=Dt.a.div(ln(),It.Colors.DARK_GRAY3),dn=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return this.props.error?u.a.createElement(bn,{className:"bp3-dark"},u.a.createElement(It.NonIdealState,{icon:"warning-sign",title:this.props.error})):u.a.createElement(bn,{className:"bp3-dark"},u.a.createElement(It.NonIdealState,{icon:u.a.createElement(It.Spinner,{intent:"primary"}),title:"Loading..."}))}}]),n}(p.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fn=function(){var t=Object(l.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.waitForInit){t.next=4;break}return t.abrupt("return",{apiURL:"http://localhost:8080/query"});case 4:return t.abrupt("return",new Promise(function(t){window.initPlugin=function(e){t(e)}}));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),mn=Object(d.b)("streamStore")(pn=Object(d.c)((hn=un=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this;fn().then(function(e){t.props.streamStore.initialize(e)})}},{key:"render",value:function(){var t=this.props.streamStore,e=t.loading,n=t.error;return e?u.a.createElement(dn,{error:n}):u.a.createElement(cn,null)}}]),n}(p.Component),un.defaultProps=Et,pn=hn))||pn)||pn,vn=function(){return u.a.createElement(d.a,{streamStore:wt},u.a.createElement(mn,null))};b.a.render(u.a.createElement(vn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},92:function(t,e,n){}},[[187,1,2]]]);
//# sourceMappingURL=main.9f39acef.chunk.js.map